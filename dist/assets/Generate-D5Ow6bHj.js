import{c as v,d as ue,r as u,q as be,j as B,a as l,b as s,s as f,e as i,u as a,f as g,F as h,h as w,l as n,m as c,p as _,x as pe,X as P,t as m,I as Z,k as V,v as G,C as fe,y as me,z as Y,i as ve,U as ye,o}from"./index-DIaYYENC.js";import{_ as he,D as xe,a as ge}from"./GalleryModal.vue_vue_type_script_setup_true_lang-CeCRPnYl.js";import{S as W}from"./search-D1HRDQWW.js";/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=v("CheckSquareIcon",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=v("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=v("Grid3x3Icon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=v("LayersIcon",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=v("MessageSquareIcon",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=v("PaletteIcon",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=v("PanelsTopLeftIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=v("SparklesIcon",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=v("SquareIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=v("VideoIcon",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=v("Wand2Icon",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),Me={class:"flex h-[calc(100vh-64px)] md:h-screen md:pt-0 bg-bg-page overflow-hidden"},Le={class:"w-80 bg-bg-base border-r border-border-base flex flex-col z-20 shadow-lg hidden lg:flex"},ze={class:"p-6 border-b border-border-base flex items-center gap-2 text-primary"},De={class:"flex-1 overflow-y-auto p-6 space-y-8"},je={class:"text-sm font-medium text-text-secondary mb-3 flex items-center gap-2"},Te={class:"grid grid-cols-2 gap-3"},Ae=["onClick"],qe={class:"text-sm font-medium text-text-secondary mb-3 flex items-center gap-2"},Pe={class:"grid grid-cols-2 gap-2"},Ve=["onClick"],Ge={class:"block text-sm font-medium"},Oe={class:"text-sm font-medium text-text-secondary mb-3 flex items-center gap-2"},Re={key:0,class:"flex items-center gap-2 bg-bg-page p-1 rounded-base border border-border-base mb-4"},Ee=["onClick"],Ue={class:"flex-1 flex flex-col min-w-0 relative"},Fe={class:"flex-1 p-4 md:p-6 overflow-y-auto bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-bg-card to-bg-page"},Ne={key:0,class:"w-full h-full space-y-8 pb-20 px-4 md:px-8"},He={key:0,class:"mb-3 pb-3 border-b border-white/20"},Be=["src","onClick"],Ze={key:1,class:"text-sm whitespace-pre-wrap"},Ye={key:1,class:"flex flex-wrap gap-4 w-full"},We=["src","onClick"],Xe={class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity flex gap-2"},Je={class:"p-1.5 bg-black/50 text-white rounded-full hover:bg-primary transition-colors"},Ke={key:0,class:"flex gap-4"},Qe={class:"w-10 h-10 rounded-full bg-primary/10 text-primary flex items-center justify-center shrink-0 animate-pulse"},et={key:1,class:"h-full flex flex-col items-center justify-center text-center text-text-secondary max-w-md mx-auto"},tt={class:"w-20 h-20 rounded-round bg-bg-card border border-border-base flex items-center justify-center mb-6 shadow-glow animate-pulse"},st={class:"p-6 border-t border-border-base bg-bg-base shadow-[0_-4px_20px_rgba(0,0,0,0.05)] z-20"},at={class:"w-full px-4 md:px-8"},rt={key:0,class:"mb-4 flex items-start gap-4 animate-in slide-in-from-bottom-2"},ot={class:"relative group w-24 h-24 rounded-base overflow-hidden border border-border-base shadow-sm"},lt=["src"],it=["src"],dt={class:"text-sm text-text-secondary pt-2"},nt={class:"font-medium text-text-primary"},ct={class:"relative flex gap-2"},ut={class:"flex flex-col gap-2"},bt={class:"flex bg-bg-page rounded-base border border-border-base p-1"},pt=["title"],ft={class:"text-xs font-medium"},mt={class:"relative flex-1"},vt={class:"absolute bottom-4 right-4 flex items-center gap-2"},yt=["disabled"],ht={class:"flex border-b border-border-base"},xt={class:"flex-1 overflow-y-auto p-4"},gt={key:0,class:"space-y-4"},wt={class:"relative"},kt={class:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide"},_t=["onClick"],Ct={class:"text-xs text-text-secondary mb-2"},It={class:"grid grid-cols-2 gap-3"},St={key:1,class:"space-y-4"},$t={class:"relative"},Mt={class:"space-y-4"},Lt=["onClick"],zt={class:"flex p-3 gap-3"},Dt={class:"w-16 h-16 shrink-0 rounded-lg overflow-hidden bg-gray-100 border border-border-base"},jt=["src"],Tt={key:1,class:"w-full h-full flex items-center justify-center text-text-secondary"},At={class:"flex-1 min-w-0 flex flex-col justify-between"},qt={class:"flex items-start justify-between gap-2"},Pt={class:"text-sm text-text-primary font-medium line-clamp-2 leading-snug"},Vt={class:"flex items-center justify-between mt-2"},Gt={class:"text-xs text-text-secondary flex items-center gap-1"},Ot={class:"text-xs font-medium px-2 py-0.5 bg-primary/10 text-primary rounded-full"},Rt={key:2,class:"mt-6 text-center"},Et=["src"],Bt=ue({__name:"Generate",setup(Ut){const Q=ve(),R=[{id:"cyberpunk",name:"赛博朋克",color:"from-blue-500 to-purple-500"},{id:"anime",name:"日系动漫",color:"from-pink-500 to-rose-500"},{id:"realistic",name:"超写实",color:"from-green-500 to-emerald-500"},{id:"oil",name:"油画风格",color:"from-yellow-500 to-orange-500"},{id:"3d",name:"3D 渲染",color:"from-indigo-500 to-blue-500"},{id:"sketch",name:"素描手绘",color:"from-gray-500 to-slate-500"}],ee=[{label:"1:1",value:"1:1",icon:"Square"},{label:"16:9",value:"16:9",icon:"Landscape"},{label:"9:16",value:"9:16",icon:"Portrait"},{label:"4:3",value:"4:3",icon:"Classic"}],te=[{id:"session_1",date:new Date().toISOString(),firstPrompt:"一只穿着宇航服的猫在月球上弹吉他，背景是地球，赛博朋克风格，霓虹灯光，高细节，8k分辨率。这只猫的表情非常专注，吉他是透明的发光材质。",firstImage:"https://public.youware.com/users-website-assets/prod/faf7c4ec-0acf-42c0-b174-678e35ae8c70/93629169d5504c54b49b89961ff3a71d",totalImages:4,messages:[{id:"msg_1_1",role:"user",content:"一只穿着宇航服的猫在月球上弹吉他，背景是地球，赛博朋克风格，霓虹灯光，高细节，8k分辨率。这只猫的表情非常专注，吉他是透明的发光材质。",referenceImage:"https://public.youware.com/users-website-assets/prod/faf7c4ec-0acf-42c0-b174-678e35ae8c70/93629169d5504c54b49b89961ff3a71d"},{id:"msg_1_2",role:"assistant",images:["https://public.youware.com/users-website-assets/prod/faf7c4ec-0acf-42c0-b174-678e35ae8c70/93629169d5504c54b49b89961ff3a71d","https://public.youware.com/users-website-assets/prod/faf7c4ec-0acf-42c0-b174-678e35ae8c70/2dd2239d444142d3afc0fb2db153df7b","https://public.youware.com/users-website-assets/prod/faf7c4ec-0acf-42c0-b174-678e35ae8c70/00bdd1645172419eb35df7fa3dd99321","https://public.youware.com/users-website-assets/prod/faf7c4ec-0acf-42c0-b174-678e35ae8c70/c19331b743f442838b6dd7026c17ae0f"]}]},{id:"session_2",date:new Date(Date.now()-864e5).toISOString(),firstPrompt:"未来城市的空中花园，悬浮在云层之上，巨大的瀑布流向下方，生物发光的植物，梦幻般的氛围。",totalImages:2,messages:[{id:"msg_2_1",role:"user",content:"未来城市的空中花园，悬浮在云层之上，巨大的瀑布流向下方，生物发光的植物，梦幻般的氛围。"},{id:"msg_2_2",role:"assistant",images:["https://public.youware.com/users-website-assets/prod/faf7c4ec-0acf-42c0-b174-678e35ae8c70/2dd2239d444142d3afc0fb2db153df7b","https://public.youware.com/users-website-assets/prod/faf7c4ec-0acf-42c0-b174-678e35ae8c70/00bdd1645172419eb35df7fa3dd99321"]}]},{id:"session_3",date:new Date(Date.now()-1728e5).toISOString(),firstPrompt:"极简主义风格的几何抽象画，柔和的色彩，光影交错。",firstImage:"https://public.youware.com/users-website-assets/prod/faf7c4ec-0acf-42c0-b174-678e35ae8c70/c19331b743f442838b6dd7026c17ae0f",totalImages:1,messages:[{id:"msg_3_1",role:"user",content:"极简主义风格的几何抽象画，柔和的色彩，光影交错。",referenceImage:"https://public.youware.com/users-website-assets/prod/faf7c4ec-0acf-42c0-b174-678e35ae8c70/c19331b743f442838b6dd7026c17ae0f"},{id:"msg_3_2",role:"assistant",images:["https://public.youware.com/users-website-assets/prod/faf7c4ec-0acf-42c0-b174-678e35ae8c70/c19331b743f442838b6dd7026c17ae0f"]}]},...Array.from({length:10}).map((r,e)=>({id:`session_mock_${e}`,date:new Date(Date.now()-(e+4)*864e5).toISOString(),firstPrompt:`历史会话示例 ${e+1}: 这是一个自动生成的测试会话，用于展示历史记录列表的滚动效果。`,firstImage:["https://public.youware.com/users-website-assets/prod/faf7c4ec-0acf-42c0-b174-678e35ae8c70/93629169d5504c54b49b89961ff3a71d","https://public.youware.com/users-website-assets/prod/faf7c4ec-0acf-42c0-b174-678e35ae8c70/2dd2239d444142d3afc0fb2db153df7b","https://public.youware.com/users-website-assets/prod/faf7c4ec-0acf-42c0-b174-678e35ae8c70/00bdd1645172419eb35df7fa3dd99321","https://public.youware.com/users-website-assets/prod/faf7c4ec-0acf-42c0-b174-678e35ae8c70/c19331b743f442838b6dd7026c17ae0f"][e%4],totalImages:Math.floor(Math.random()*8)+1,messages:[{id:`msg_mock_${e}_1`,role:"user",content:`历史会话示例 ${e+1}: 这是一个自动生成的测试会话，用于展示历史记录列表的滚动效果。`},{id:`msg_mock_${e}_2`,role:"assistant",images:["https://public.youware.com/users-website-assets/prod/faf7c4ec-0acf-42c0-b174-678e35ae8c70/93629169d5504c54b49b89961ff3a71d"]}]}))],se=Array.from({length:30}).map((r,e)=>({id:`gal_${e}`,src:["https://public.youware.com/users-website-assets/prod/faf7c4ec-0acf-42c0-b174-678e35ae8c70/c19331b743f442838b6dd7026c17ae0f","https://public.youware.com/users-website-assets/prod/faf7c4ec-0acf-42c0-b174-678e35ae8c70/93629169d5504c54b49b89961ff3a71d","https://public.youware.com/users-website-assets/prod/faf7c4ec-0acf-42c0-b174-678e35ae8c70/2dd2239d444142d3afc0fb2db153df7b","https://public.youware.com/users-website-assets/prod/faf7c4ec-0acf-42c0-b174-678e35ae8c70/00bdd1645172419eb35df7fa3dd99321"][e%4],title:`Gallery Item ${e}`,category:["Portrait","Landscape","Sci-Fi","Abstract"][e%4],type:e%3===0?"video":"image",prompt:`Gallery Item ${e} prompt description...`,user:{name:"System"},likes:Math.floor(Math.random()*1e3),runs:Math.floor(Math.random()*5e3),style:["Cyberpunk","Fantasy","Abstract","Portrait"][e%4]})),x=u(""),$=u(!1),A=u(R[0].id),E=u("1:1"),M=u(1),C=u(!1),p=u(null),D=u(!0),b=u("image"),k=u("gallery"),j=u(""),q=u(""),T=u("All"),I=u(null),S=u(null),y=u(null),L=u(te);be(()=>{if(history.state){const{prompt:r,autoGenerate:e,referenceImage:t}=history.state;r&&(x.value=r,e&&U(r)),t&&(p.value=t,b.value="image"),window.history.replaceState({},document.title)}});const U=(r=x.value)=>{!r&&!p.value||($.value=!0,setTimeout(()=>{$.value=!1;const e=["https://public.youware.com/users-website-assets/prod/faf7c4ec-0acf-42c0-b174-678e35ae8c70/93629169d5504c54b49b89961ff3a71d","https://public.youware.com/users-website-assets/prod/faf7c4ec-0acf-42c0-b174-678e35ae8c70/2dd2239d444142d3afc0fb2db153df7b","https://public.youware.com/users-website-assets/prod/faf7c4ec-0acf-42c0-b174-678e35ae8c70/00bdd1645172419eb35df7fa3dd99321","https://public.youware.com/users-website-assets/prod/faf7c4ec-0acf-42c0-b174-678e35ae8c70/c19331b743f442838b6dd7026c17ae0f"].slice(0,M.value);if(y.value){const t={...y.value,totalImages:y.value.totalImages+e.length,messages:[...y.value.messages,{id:`msg_${Date.now()}_u`,role:"user",content:r,referenceImage:p.value||void 0},{id:`msg_${Date.now()}_a`,role:"assistant",images:e}]};y.value=t,L.value=L.value.map(d=>d.id===t.id?t:d)}else{const t={id:`session_${Date.now()}`,date:new Date().toISOString(),firstPrompt:r,firstImage:p.value||void 0,totalImages:e.length,messages:[{id:`msg_${Date.now()}_u`,role:"user",content:r,referenceImage:p.value||void 0},{id:`msg_${Date.now()}_a`,role:"assistant",images:e}]};L.value=[t,...L.value],y.value=t}},3e3))},ae=()=>{const r=!C.value;C.value=r,r?M.value=6:M.value=1},re=()=>{const r=document.createElement("input");r.type="file",r.accept=b.value==="image"?"image/*":"video/*",r.onchange=e=>{var d;const t=(d=e.target.files)==null?void 0:d[0];if(t){const z=new FileReader;z.onload=N=>{var H;p.value=(H=N.target)==null?void 0:H.result},z.readAsDataURL(t)}},r.click()},oe=B(()=>L.value.filter(r=>r.date.includes(j.value)||r.firstPrompt.toLowerCase().includes(j.value.toLowerCase()))),le=B(()=>se.filter(r=>{const e=r.type===b.value,t=r.title.toLowerCase().includes(q.value.toLowerCase()),d=T.value==="All"||r.category===T.value;return e&&t&&d})),F=(r,e)=>{e==="history"?y.value=r:S.value=r},ie=r=>{r&&(x.value=r.prompt||"",p.value=r.src,r.type==="video"?b.value="video":b.value="image",S.value=null)},de=r=>{r&&(x.value=r.prompt||"",p.value=r.src,S.value=null)},ne=r=>new Date(r).toLocaleString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),ce=()=>{Q.push("/gallery")};return(r,e)=>(o(),l("div",Me,[s("div",Le,[s("div",ze,[i(a(O),{class:"w-5 h-5"}),e[16]||(e[16]=s("h2",{class:"font-bold text-lg"},"创作工具",-1))]),s("div",De,[s("div",null,[s("label",je,[i(a(Ie),{class:"w-4 h-4"}),e[17]||(e[17]=g(" 艺术风格 ",-1))]),s("div",Te,[(o(),l(h,null,w(R,t=>s("button",{key:t.id,onClick:d=>A.value=t.id,class:n(a(c)("relative overflow-hidden p-3 rounded-base border text-left transition-all group",A.value===t.id?"border-primary shadow-glow":"border-border-base hover:border-primary/50"))},[s("div",{class:n(a(c)("absolute inset-0 opacity-10 bg-gradient-to-br",t.color))},null,2),s("span",{class:n(a(c)("text-sm font-medium relative z-10",A.value===t.id?"text-primary":"text-text-secondary group-hover:text-text-primary"))},m(t.name),3)],10,Ae)),64))])]),s("div",null,[s("label",qe,[i(a(Se),{class:"w-4 h-4"}),e[18]||(e[18]=g(" 画面比例 ",-1))]),s("div",Pe,[(o(),l(h,null,w(ee,t=>s("button",{key:t.value,onClick:d=>E.value=t.value,class:n(a(c)("p-3 rounded-base border text-center transition-all",E.value===t.value?"bg-primary/10 border-primary text-primary shadow-glow":"bg-bg-card border-border-base text-text-secondary hover:border-primary/50 hover:text-primary"))},[s("span",Ge,m(t.label),1)],10,Ve)),64))])]),s("div",null,[s("label",Oe,[i(a(_e),{class:"w-4 h-4"}),e[19]||(e[19]=g(" 生成数量 ",-1))]),C.value?f("",!0):(o(),l("div",Re,[(o(),l(h,null,w([1,2,3,4],t=>s("button",{key:t,onClick:d=>M.value=t,class:n(a(c)("flex-1 py-2 rounded-small text-sm font-medium transition-all",M.value===t?"bg-bg-card text-primary shadow-sm border border-border-light":"text-text-secondary hover:text-text-primary"))},m(t),11,Ee)),64))])),s("button",{onClick:ae,class:n(a(c)("flex items-center gap-3 w-full p-3 rounded-base border transition-all",C.value?"bg-primary/10 border-primary text-primary shadow-glow":"bg-bg-card border-border-base text-text-secondary hover:border-primary/50 hover:text-primary"))},[C.value?(o(),_(a(we),{key:0,class:"w-5 h-5 shrink-0"})):(o(),_(a($e),{key:1,class:"w-5 h-5 shrink-0"})),e[20]||(e[20]=s("div",{class:"text-left"},[s("span",{class:"block text-sm font-medium"},"亚马逊套图"),s("span",{class:"block text-xs opacity-70"},"自动生成 6 张商品展示图")],-1))],2)])])]),s("div",Ue,[s("div",Fe,[y.value?(o(),l("div",Ne,[(o(!0),l(h,null,w(y.value.messages,t=>(o(),l("div",{key:t.id,class:n(a(c)("flex gap-4",t.role==="assistant"?"flex-row":"flex-row-reverse"))},[s("div",{class:n(a(c)("w-10 h-10 rounded-full flex items-center justify-center shrink-0",t.role==="assistant"?"bg-primary/10 text-primary":"bg-gray-200 text-gray-600"))},[t.role==="assistant"?(o(),_(a(O),{key:0,class:"w-5 h-5"})):(o(),_(a(ye),{key:1,class:"w-5 h-5"}))],2),s("div",{class:n(a(c)("flex-1 space-y-2 max-w-[85%]",t.role==="user"&&"flex flex-col items-end"))},[t.content||t.role==="user"&&t.referenceImage?(o(),l("div",{key:0,class:n(a(c)("inline-block p-4 rounded-2xl text-left shadow-sm",t.role==="user"?"bg-primary text-white rounded-tr-none":"bg-white border border-border-base rounded-tl-none"))},[t.role==="user"&&t.referenceImage?(o(),l("div",He,[s("img",{src:t.referenceImage,alt:"Ref",class:"w-16 h-16 rounded-lg object-cover border border-white/30 cursor-pointer hover:opacity-90 transition-opacity shadow-sm bg-black/20",onClick:Y(d=>I.value=t.referenceImage,["stop"])},null,8,Be)])):f("",!0),t.content?(o(),l("p",Ze,m(t.content),1)):f("",!0)],2)):f("",!0),t.images&&t.images.length>0?(o(),l("div",Ye,[(o(!0),l(h,null,w(t.images,(d,z)=>(o(),l("div",{key:z,class:"relative group rounded-xl overflow-hidden shadow-md border border-border-base bg-white max-w-[300px] flex-shrink-0"},[s("img",{src:d,alt:"Generated",class:"w-full h-auto object-contain cursor-zoom-in",onClick:N=>I.value=d},null,8,We),s("div",Xe,[s("button",Je,[i(a(xe),{class:"w-4 h-4"})])])]))),128))])):f("",!0)],2)],2))),128)),$.value?(o(),l("div",Ke,[s("div",Qe,[i(a(O),{class:"w-5 h-5"})]),e[21]||(e[21]=pe('<div class="bg-white border border-border-base p-4 rounded-2xl rounded-tl-none shadow-sm flex items-center gap-3"><div class="w-2 h-2 bg-primary rounded-full animate-bounce"></div><div class="w-2 h-2 bg-primary rounded-full animate-bounce delay-75"></div><div class="w-2 h-2 bg-primary rounded-full animate-bounce delay-150"></div><span class="text-sm text-text-secondary ml-2">正在生成中...</span></div>',1))])):f("",!0)])):(o(),l("div",et,[s("div",tt,[i(a(K),{class:"w-10 h-10 text-primary"})]),e[22]||(e[22]=s("h3",{class:"text-xl font-medium text-text-primary mb-2"},"开始您的创作之旅",-1)),e[23]||(e[23]=s("p",{class:"text-text-secondary"},"选择左侧的艺术风格，在下方输入描述，或从右侧历史记录中选择会话。",-1))]))]),s("div",st,[s("div",at,[p.value?(o(),l("div",rt,[s("div",ot,[b.value==="video"?(o(),l("video",{key:0,src:p.value,class:"w-full h-full object-cover"},null,8,lt)):(o(),l("img",{key:1,src:p.value,alt:"Reference",class:"w-full h-full object-cover"},null,8,it)),s("button",{onClick:e[0]||(e[0]=t=>p.value=null),class:"absolute top-1 right-1 p-1 bg-black/50 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-danger"},[i(a(P),{class:"w-3 h-3"})])]),s("div",dt,[s("p",nt,"参考"+m(b.value==="image"?"图":"视频")+"已添加",1),e[24]||(e[24]=s("p",null,"AI 将参考此内容的构图和色彩进行生成",-1))])])):f("",!0),s("div",ct,[s("div",ut,[s("div",bt,[s("button",{onClick:e[1]||(e[1]=t=>b.value="image"),class:n(a(c)("flex-1 p-2 rounded-small transition-all",b.value==="image"?"bg-white shadow-sm text-primary":"text-text-secondary hover:text-text-primary")),title:"图片模式"},[i(a(Z),{class:"w-4 h-4"})],2),s("button",{onClick:e[2]||(e[2]=t=>b.value="video"),class:n(a(c)("flex-1 p-2 rounded-small transition-all",b.value==="video"?"bg-white shadow-sm text-primary":"text-text-secondary hover:text-text-primary")),title:"视频模式"},[i(a(J),{class:"w-4 h-4"})],2)]),s("button",{onClick:re,class:n(a(c)("p-4 rounded-base border border-border-base flex flex-col items-center justify-center gap-1 transition-all w-24 shrink-0",p.value?"bg-primary/5 border-primary text-primary":"bg-bg-page text-text-secondary hover:border-primary hover:text-primary")),title:`上传参考${b.value==="image"?"图":"视频"}`},[b.value==="image"?(o(),_(a(Z),{key:0,class:"w-6 h-6"})):(o(),_(a(J),{key:1,class:"w-6 h-6"})),s("span",ft,"参考"+m(b.value==="image"?"图":"视频"),1)],10,pt)]),s("div",mt,[V(s("textarea",{"onUpdate:modelValue":e[3]||(e[3]=t=>x.value=t),placeholder:"描述您想看到的内容...",class:"w-full h-full min-h-[80px] bg-bg-page border border-border-base rounded-base p-4 pr-32 text-text-primary placeholder-text-placeholder focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary/50 transition-all resize-none shadow-inner"},null,512),[[G,x.value]]),s("div",vt,[x.value?(o(),l("button",{key:0,onClick:e[4]||(e[4]=t=>x.value=""),class:"p-2 text-text-secondary hover:text-danger transition-colors"},[i(a(P),{class:"w-4 h-4"})])):f("",!0),s("button",{onClick:e[5]||(e[5]=t=>U()),disabled:!x.value&&!p.value||$.value,class:"el-button el-button-primary shadow-glow px-6"},[$.value?(o(),l(h,{key:0},[e[25]||(e[25]=s("div",{class:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"},null,-1)),e[26]||(e[26]=g(" 生成中... ",-1))],64)):(o(),l(h,{key:1},[i(a(K),{class:"w-4 h-4 mr-2"}),g(" 生成 "+m(C.value?" (6张)":""),1)],64))],8,yt)])])])])]),D.value?f("",!0):(o(),l("button",{key:0,onClick:e[6]||(e[6]=t=>D.value=!0),class:"absolute top-6 right-6 p-2 bg-bg-base border border-border-base rounded-base shadow-md text-text-secondary hover:text-primary z-30"},[i(a(fe),{class:"w-5 h-5"})]))]),s("div",{class:n(a(c)("bg-bg-base border-l border-border-base flex flex-col transition-all duration-300 ease-in-out z-20 shadow-lg",D.value?"w-80 translate-x-0":"w-0 translate-x-full opacity-0 overflow-hidden"))},[s("div",ht,[s("button",{onClick:e[7]||(e[7]=t=>k.value="gallery"),class:n(a(c)("flex-1 py-3 text-sm font-medium transition-colors border-b-2",k.value==="gallery"?"text-primary border-primary bg-primary/5":"text-text-secondary border-transparent hover:text-text-primary hover:bg-bg-page"))},[i(a(ke),{class:"w-4 h-4 inline-block mr-2"}),e[27]||(e[27]=g(" 浏览画廊 ",-1))],2),s("button",{onClick:e[8]||(e[8]=t=>k.value="history"),class:n(a(c)("flex-1 py-3 text-sm font-medium transition-colors border-b-2",k.value==="history"?"text-primary border-primary bg-primary/5":"text-text-secondary border-transparent hover:text-text-primary hover:bg-bg-page"))},[i(a(X),{class:"w-4 h-4 inline-block mr-2"}),e[28]||(e[28]=g(" 历史记录 ",-1))],2),s("button",{onClick:e[9]||(e[9]=t=>D.value=!1),class:"px-3 border-l border-border-base text-text-secondary hover:text-primary"},[i(a(me),{class:"w-4 h-4"})])]),s("div",xt,[k.value==="gallery"?(o(),l("div",gt,[s("div",wt,[i(a(W),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-text-secondary"}),V(s("input",{type:"text",placeholder:"搜索画廊...","onUpdate:modelValue":e[10]||(e[10]=t=>q.value=t),class:"w-full pl-9 pr-3 py-2 bg-bg-page border border-border-base rounded-base text-sm focus:outline-none focus:border-primary"},null,512),[[G,q.value]])]),s("div",kt,[(o(),l(h,null,w(["All","Portrait","Landscape","Sci-Fi","Abstract"],t=>s("button",{key:t,onClick:d=>T.value=t,class:n(a(c)("px-3 py-1 rounded-full text-xs border whitespace-nowrap transition-colors",T.value===t?"bg-primary text-white border-primary":"bg-bg-card border-border-base text-text-secondary hover:border-primary"))},m(t),11,_t)),64))]),s("div",Ct," 正在显示: "+m(b.value==="image"?"图片":"视频")+"资源 ",1),s("div",It,[(o(!0),l(h,null,w(le.value,t=>(o(),_(ge,{key:t.id,item:t,"aspect-ratio":"aspect-square",onClick:d=>F(t,"gallery")},null,8,["item","onClick"]))),128))]),s("div",{class:"mt-6 text-center"},[s("button",{onClick:ce,class:"text-xs text-primary hover:underline transition-colors"}," 浏览更多灵感 → ")])])):f("",!0),k.value==="history"?(o(),l("div",St,[s("div",$t,[i(a(W),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-text-secondary"}),V(s("input",{type:"text",placeholder:"搜索日期或内容...","onUpdate:modelValue":e[11]||(e[11]=t=>j.value=t),class:"w-full pl-9 pr-3 py-2 bg-bg-page border border-border-base rounded-base text-sm focus:outline-none focus:border-primary"},null,512),[[G,j.value]])]),s("div",Mt,[(o(!0),l(h,null,w(oe.value,t=>{var d;return o(),l("div",{key:t.id,class:n(a(c)("group relative rounded-base overflow-hidden bg-bg-card border cursor-pointer transition-all hover:shadow-md",((d=y.value)==null?void 0:d.id)===t.id?"border-primary ring-1 ring-primary":"border-border-base hover:border-primary/50")),onClick:z=>F(t,"history")},[s("div",zt,[s("div",Dt,[t.firstImage?(o(),l("img",{key:0,src:t.firstImage,alt:"Thumbnail",class:"w-full h-full object-cover"},null,8,jt)):(o(),l("div",Tt,[i(a(Ce),{class:"w-6 h-6"})]))]),s("div",At,[s("div",qt,[s("p",Pt,m(t.firstPrompt),1)]),s("div",Vt,[s("span",Gt,[i(a(X),{class:"w-3 h-3"}),g(" "+m(ne(t.date)),1)]),s("span",Ot,m(t.totalImages)+" 张 ",1)])])])],10,Lt)}),128))])])):f("",!0),k.value==="history"?(o(),l("div",Rt,[...e[29]||(e[29]=[s("button",{class:"text-xs text-text-secondary hover:text-primary transition-colors"}," 加载更多... ",-1)])])):f("",!0)])],2),I.value?(o(),l("div",{key:0,class:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:e[14]||(e[14]=t=>I.value=null)},[s("button",{class:"absolute top-4 right-4 p-2 text-white/70 hover:text-white transition-colors",onClick:e[12]||(e[12]=t=>I.value=null)},[i(a(P),{class:"w-8 h-8"})]),s("img",{src:I.value,alt:"Full view",class:"max-w-full max-h-full object-contain rounded-lg shadow-2xl",onClick:e[13]||(e[13]=Y(()=>{},["stop"]))},null,8,Et)])):f("",!0),i(he,{isOpen:!!S.value,item:S.value,onClose:e[15]||(e[15]=t=>S.value=null),onUse:ie,onEdit:de},null,8,["isOpen","item"])]))}});export{Bt as default};
